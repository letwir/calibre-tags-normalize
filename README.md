# Calibre Normalize Fullwidth Numbers plugin
# Calibre正規化プラグイン
  
#### generated by ChatGPT-5-mini, modified by ChatGPT-5, letwir
  
license: GPLv3  
  
This repository contains Calibre plugin that will be  
installed as a user action. It provides a normalization function to convert  
fullwidth digits (０-９) and fullwidth spaces (U+3000) to ASCII digits and  
halfwidth spaces.  
Roman Number to ASCII (e.g. VIII).  

## e,g.)  
 * {title}: n	-> {title} n巻  
 * {title}(n)	-> {title} n巻  
 * ＜{title}＞n	-> ＜{title}＞ n巻  
 * ~,～	-> ～  
 * 年3月 -> 年03月  
 * del【◯◯特典付き!】, 【電子特別版】  
and more...  

How to test:
1. Download [Release](https://github.com/letwir/calibre-tags-normalize/releases)    
   and install as a zip plugin from Calibre's Preferences -> Plugins -> Load plugin from file.  
   Select **Right-click Menu** (Recommend)  
2. Restart Calibre. The action will appear in the toolbar/menu (name: "Normalization/正規化").  
3. Select one or more books and trigger the action. 
  
-----
このプラグインはPythonのunicodedata.normalize('NFKC')を利用し、正規化します。  
変更内容はCalibreDBへのみ保存されるため、各ファイルへの書誌反映は  
```
calibredb.exe embed_metadata all --library-path=＜YOUR LIBRARY PATH＞
```
などを使用して反映してください。  

[No Trans](https://github.com/Cirn09/calibre-do-not-translate-my-path)など  
プラグインでライブラリを改変している場合はフォルダ構成は即反映されます。  
ついでに以下の機能を有します。  
  
* 一部の巻数の表現を統一します。  
* Windowserなので～(全角チルダ)に統一します。  
* 雑誌などの「NN年N月号」を「NN月0N月号」に変換します。  
* 【◯◯特典付】, 【電子特別版】を削除します。  
  
使い方:
1. [Release](https://github.com/letwir/calibre-tags-normalize/releases)からzipをダウンロード。  
   Calibreの 設定 -> Plugins -> Load plugin from fileからzipファイルを読み込み。  
    **右クリックメニュー**に登録をオススメします。
2. Calibreを再起動したらメニューに"Normalization/正規化"が追加されます。  
3. 本を選択し、メニューを押すと自動で書き換えます。(calibre-debug -gにて起動した場合、ログを出力します。)  
  
  
Files added:  
- `plugin/__init__.py` — InterfaceAction wrapper (action entrypoint)
- `plugin/normalize.py` — Normalization helpers
- `plugin/amazon_fetch.py` — fetch Amazon meta tags. 未実装
  
TODO:  
- diff file export
- Use Calibre Task
- threads process
- fetch amazon metadata